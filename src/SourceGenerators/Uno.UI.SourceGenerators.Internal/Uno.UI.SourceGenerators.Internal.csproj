<Project Sdk="MSBuild.Sdk.Extras">
	<PropertyGroup>
		<TargetFrameworks>net461;netstandard2.0</TargetFrameworks>
		<AssemblyName>Uno.UI.SourceGenerators.Internal</AssemblyName>
		<AppendTargetFrameworkToOutputPath>true</AppendTargetFrameworkToOutputPath>
		<WarningsAsErrors>true</WarningsAsErrors>
		<CopyLocalLockFileAssemblies>true</CopyLocalLockFileAssemblies>
		<TreatWarningsAsErrors>true</TreatWarningsAsErrors>

		<!-- This target must always be built, regardless of the CI override -->
		<TargetFrameworksOverrideInvariant>netstandard2.0</TargetFrameworksOverrideInvariant>
	</PropertyGroup>

	<ItemGroup Condition="'$(TargetFramework)'=='net461'">
		<PackageReference Include="Microsoft.CodeAnalysis.CSharp" Version="3.3.1" ExcludeAssets="runtime" />
		<PackageReference Include="Microsoft.CodeAnalysis.Common" Version="3.3.1" ExcludeAssets="runtime" />
		<PackageReference Include="Microsoft.CodeAnalysis.Workspaces.Common" Version="3.3.1" ExcludeAssets="runtime" />
		<PackageReference Include="Uno.SourceGeneration" />
	</ItemGroup>

	<ItemGroup Condition="'$(TargetFramework)'=='netstandard2.0' or '$(TargetFramework)'=='net5.0'">
		<PackageReference Include="Microsoft.CodeAnalysis.CSharp" Version="3.8.0" ExcludeAssets="runtime" />
	</ItemGroup>

	<Import Project="..\..\Uno.Foundation\Uno.Core.Extensions\Uno.Core.Extensions.props" />

	<ItemGroup>
	  <Compile Include="..\..\Uno.Foundation.Runtime.WebAssembly\Interop\TSInteropMessageAttribute.wasm.cs" Link="TSBindings\TSInteropMessageAttribute.cs" />
	  <Compile Include="..\Uno.UI.SourceGenerators\Helpers\DependenciesInitializer.cs" Link="Helpers\DependenciesInitializer.cs" />
	  <Compile Include="..\Uno.UI.SourceGenerators\Helpers\DesignTimeHelper.cs" Link="Helpers\DesignTimeHelper.cs" />
	  <Compile Include="..\Uno.UI.SourceGenerators\Helpers\GeneratorExecutionContextExtensions.cs" Link="Helpers\GeneratorExecutionContextExtensions.cs" />
		<Compile Include="..\Uno.UI.SourceGenerators\Helpers\Nullable.cs" Link="Helpers\Nullable.cs" />
	  <Compile Include="..\Uno.UI.SourceGenerators\Helpers\HashBuilder.cs" Link="Helpers\HashBuilder.cs" />
	  <Compile Include="..\Uno.UI.SourceGenerators\Helpers\PlatformHelper.cs" Link="Helpers\PlatformHelper.cs" />
	  <Compile Include="..\Uno.UI.SourceGenerators\Helpers\SymbolExtensions.cs" Link="Helpers\SymbolExtensions.cs" />
	  <Compile Include="..\Uno.UI.SourceGenerators\XamlGenerator\XamlConstants.cs" Link="XamlGenerator\XamlConstants.cs" />
	</ItemGroup>

	<Target Name="GetTargetPath" />
	<Target Name="GetCopyToPublishDirectoryItems" />
</Project>
