<!--
***********************************************************************************************
WARNING:
DO NOT MODIFY this file unless you are knowledgeable about MSBuild and have
created a backup copy. Incorrect changes to this file will make it
impossible to load or build your projects from the command-line or the IDE.

Copyright (C) Uno Platform Inc. All rights reserved.
***********************************************************************************************
-->
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

	<Import Sdk="Microsoft.NET.Sdk" Project="Sdk.targets"  Condition=" $(_UnoImportMicrosoftNETSdkTargets) " />

	<PropertyGroup Condition=" $(Configuration) == 'Debug' ">
		<DebugType>portable</DebugType>
		<DebugSymbols>True</DebugSymbols>

		<!-- Required for Hot Reload (See https://github.com/dotnet/sdk/issues/36666) -->
		<IncludeSourceRevisionInInformationalVersion>false</IncludeSourceRevisionInInformationalVersion>
	</PropertyGroup>

	<PropertyGroup>
		<DefaultLanguage Condition=" $(DefaultLanguage) == '' ">en</DefaultLanguage>
	</PropertyGroup>

	<ItemGroup>
		<!-- Removes native usings to avoid Ambiguous reference -->
		<Using Remove="@(Using->HasMetadata('Platform'))" />
	</ItemGroup>

	<ItemGroup Condition=" !$(IsWinAppSdk) ">
		<!-- Include all images by default - matches the __WindowsAppSdkDefaultImageIncludes property in the WindowsAppSDK -->
		<Content Include="Assets\**;**/*.png;**/*.bmp;**/*.jpg;**/*.dds;**/*.tif;**/*.tga;**/*.gif" 
			Exclude="$(DefaultItemExcludes);$(DefaultExcludesInProjectFolder);**\*.svg" />
		<Page Include="**\*.xaml" Exclude="$(DefaultItemExcludes);$(DefaultExcludesInProjectFolder)" />
		<Compile Update="**\*.xaml.cs">
			<DependentUpon>%(Filename)</DependentUpon>
		</Compile>
		<PRIResource Include="**\*.resw" Exclude="$(DefaultItemExcludes);$(DefaultExcludesInProjectFolder)" />
	</ItemGroup>

	<ItemGroup Condition=" '$(PkgUno_Resizetizer)'!='' ">
		<UnoImage Include="Assets\**\*.svg" Exclude="$(UnoImage)" />
	</ItemGroup>

	<Import Project="$(MSBuildThisFileDirectory)../targets/Uno.CrossTargeting.targets" />

	<Choose>
		<When Condition="$([MSBuild]::GetTargetPlatformIdentifier('$(TargetFramework)')) == 'android'">

		</When>
		<When Condition="$([MSBuild]::GetTargetPlatformIdentifier('$(TargetFramework)')) == 'ios'">

		</When>
		<When Condition="$([MSBuild]::GetTargetPlatformIdentifier('$(TargetFramework)')) == 'macos'">

		</When>
		<When Condition="$([MSBuild]::GetTargetPlatformIdentifier('$(TargetFramework)')) == 'maccatalyst'">

		</When>
		<When Condition="$(TargetFramework.Contains('windows10'))">
			<!-- Workaround to avoid including Project XBFs in the PRI file: https://github.com/microsoft/microsoft-ui-xaml/issues/8857 -->
			<Import Project="$(MSBuildThisFileDirectory)..\targets\winappsdk-workaround.targets"
					Condition="'$(SingleProject)' != 'true' and '$(DisableWinUI8857_Workaround)' != 'true' "/>
		</When>
		<When Condition="$([MSBuild]::GetTargetPlatformIdentifier('$(TargetFramework)')) == 'browser'">
		</When>
	</Choose>

	<!-- Uno Developers should comment this target out if they need to override UnoVersion for dev testing -->
	<Target Name="UnoSdkVersionCheck">
		<Error Condition=" '$(UnoVersion)' != 'DefaultUnoVersion' " Text="Do not override the 'UnoVersion'. The 'UnoVersion' must match the version of the Uno.Sdk." />

		<!-- Check if the Uno.WinUI version matches DefaultUnoVersion -->
		<Error Text="Resolved version of Uno.WinUI does not match DefaultUnoVersion."
			Condition="'@(UnoWinUIPackageReference->'%(Version)')' != 'DefaultUnoVersion'" />
	</Target>
</Project>
